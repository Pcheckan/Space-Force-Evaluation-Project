@page "/Survey"

<PageTitle>Survey</PageTitle>

<h1>Survey</h1>
<p>@numWeekly</p>
<p role="status">@surveyItem</p>
<p>@surveyItem2</p>
<p>@surveyItem3</p>
<p>@NumQuestions</p>



<button class="btn btn-primary" @onclick="ShowSurveys">Show Survey</button>
<button class="btn btn-primary" @onclick="ShowDaily">Show Daily</button>
<button class="btn btn-primary" @onclick="ShowWeekly">Show Weekly</button>


 <div class ="form-group row">
            <div class = "col-2">
                <input type = "button" class = "btn btn-primary" value ="Reload Page" onclick="location.href='/Survey'"/>
            </div>
            <div class = "col-2">
                <input type = "button" class = "btn btn-primary" value ="Submit" onclick="location.href='/Landing'"/>
            </div>
    </div>

@code {
    private string surveyItem = "";
    private string surveyItem2 = "";
    private string surveyItem3 = "";
    private Random rnd = new Random();
    private int NumQuestions;
    private string SurveyType;

    private int numWeekly;

    private string testQuestion = "This is a test Question";

    // We will need a function to get the maximum number of questions from the question bank
    private int getMax()
    {
        return 30;
    }


    // Function to return a specific question based on a random number
    private int getQuestion(Random rnd, string SurveyType)
    {
        //If daily question
        if (SurveyType == "Daily")
        {
            return rnd.Next(getMax());
        }

        // If weekly
        if (SurveyType == "Weekly")
        {
            Random random = new Random();
            int j = random.Next(1,4);
            //Generate 1-3 questions
            for (int i = 1; i <= j;i++)
            {
                numWeekly = i;

                // !NOTE, We still need to generate and get questions for each of these
                if (surveyItem =="")
                {
                    surveyItem = testQuestion;
                }
                // If survey question 1 has been filled in, move to the next one
                else if (surveyItem2 == "")
                {
                    surveyItem2 = testQuestion;
                }
                else if (surveyItem3 == "")
                {
                    surveyItem3 = testQuestion;
                }
            }           
        }

        //If Monthly


        //for now, we will always return for daily
        return rnd.Next(getMax());

    }
    // Function for displaying the survey question(s)
    private void ShowSurveys()
    {
        //NumQuestions = getQuestion(rnd);
        surveyItem = testQuestion;
        surveyItem2 = testQuestion;
        surveyItem3 = testQuestion;

    }
    private void ShowDaily()
    {
        SurveyType = "Daily";
        NumQuestions = getQuestion(rnd, SurveyType);
    }
    private void ShowWeekly()
    {
        SurveyType = "Weekly";
        NumQuestions = getQuestion(rnd, SurveyType);

    }
}

@code
{

}
